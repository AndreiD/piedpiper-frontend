(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{412:function(t,e,n){"use strict";n.r(e);n(28),n(185);var o={auth:!1,data:function(){return{search:"",isLoading:!0,users:[],selectedUser:null,infoWindowPos:null,infoWinOpen:!1,currentMidx:null,infoOptions:{pixelOffset:{width:0,height:-35}},markers:[]}},mounted:function(){this.search="",this.loadMapUsers()},methods:{returnToCenter:function(){this.$refs.gMap.map.setCenter(this.locations[0])},toggleInfoWindow:function(marker,t){this.selectedUser=marker,this.infoWindowPos=marker.position,this.infoOptions.content=marker.infoText,this.currentMidx==t?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=t)},goToUser:function(){this.$router.push({path:"/user/"+this.selectedUser.name+"/"+this.selectedUser.id})},loadMapUsers:function(){var t=this;this.$axios.get("/users").then((function(e){t.users=e.data,t.selectedUser=t.users[0],t.users.forEach((function(e){console.log("user :",e),t.markers.push({id:e._id,position:{lat:e.location.lat,lng:e.location.lng},name:e.first_name+" "+e.last_name,offers:e.offers,optimized:!0,icon:{url:e.pic_url,scaledSize:{height:45,width:45}},infoText:e.first_name+" "+e.last_name})})),t.isLoading=!1,console.log("this.locations :",t.locations)})).catch((function(e){console.log(e),t.isLoading=!1,t.flash(e,"error")}))}}},r=n(21),l=n(73),c=n.n(l),d=n(310),f=n(311),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.isLoading?t._e():n("div",[n("v-container",{staticClass:"pa-0 ma-0 fill-height",attrs:{fluid:""}},[n("GmapMap",{ref:"mapRef",staticStyle:{height:"100vh",width:"100%"},attrs:{center:{lat:44.52,lng:25.25},zoom:5,"map-type-id":"roadmap",fullscreenControl:"true"}},[t.selectedUser?n("GmapInfoWindow",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen}},[n("p",{staticClass:"title"},[t._v(t._s(t.selectedUser.name))]),t._v(" "),t.selectedUser.icon?n("img",{staticStyle:{width:"55px","text-align":"center",display:"block",margin:"auto"},attrs:{src:t.selectedUser.icon.url,alt:t.selectedUser.name}}):t._e(),t._v(" "),n("p",{staticClass:"subtitle",staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.selectedUser.offers))]),t._v(" "),n("v-btn",{staticStyle:{color:"#555"},attrs:{small:"",block:"",outlined:""},on:{click:function(e){return t.goToUser()}}},[t._v("chat")])],1):t._e(),t._v(" "),t._l(t.markers,(function(e,o){return n("GmapMarker",{key:o,staticClass:"markerStyle",attrs:{position:e.position,clickable:!0,draggable:!1},on:{click:function(n){return t.toggleInfoWindow(e,o)}}})}))],2)],1)],1)])}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBtn:d.a,VContainer:f.a})}}]);